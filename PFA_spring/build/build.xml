<?xml version="1.0" encoding="UTF-8"?>
<project name="PFA BUILD" default="all" basedir="..">

	<target name="all" depends="">
	</target>

	<path id="classpath">
		<fileset dir="${basedir}/lib" includes="**/*.jar" />
		<pathelement path="bin" />
		<pathelement path="resources" />
	</path>

	<!-- *************************************************************** -->
	<!-- Compile the service. -->
	<!-- *************************************************************** -->
	<target name="compile">
		<delete dir="${basedir}/build/bin" />
		<mkdir dir="${basedir}/build/bin/classes" />
		<javac debug="true" debuglevel="lines,vars,source" verbose="true" srcdir="${basedir}/src" classpathref="classpath" destdir="${basedir}/build/bin/classes" />

	</target>

	<!-- *************************************************************** -->
	<!-- Compile the service. -->
	<!-- *************************************************************** -->
	<target name="package" depends="compile">

	</target>




	<target name="copy">
		<copy todir="/home/kruno/apache-tomcat-7.0.42/webapps">
			<fileset dir="${basedir}">
				<include name="pfa.war" />
			</fileset>
		</copy>

	</target>

	<target name="bring_up">

		<sql driver="org.postgresql.Driver" 
			classpath="postgresql-8.3-607.jdbc3.jar" 
			url="jdbc:postgresql://localhost/pfa" 
			userid="orka" password="orka" autocommit="true"
			classpathref="classpath">
		ALTER SEQUENCE pfa_doc_template_sequence RESTART WITH 1000;
		ALTER SEQUENCE pfa_document_sequence RESTART WITH 1000;
		ALTER SEQUENCE pfa_picture_sequence RESTART WITH 1000;
		ALTER SEQUENCE pfa_tenant_prop_sequence RESTART WITH 1000;
		ALTER SEQUENCE pfa_tenant_sequence RESTART WITH 1000;
		ALTER SEQUENCE pfa_user_sequence RESTART WITH 1000;
		TRUNCATE TABLE pfa_tenant CASCADE;
		TRUNCATE TABLE pfa_tenant_properties CASCADE;
		TRUNCATE TABLE pfa_document CASCADE;
		TRUNCATE TABLE pfa_document_template CASCADE;
		TRUNCATE TABLE pfa_picture CASCADE;
		TRUNCATE TABLE pfa_template_picture CASCADE;
		TRUNCATE TABLE pfa_user CASCADE;
		TRUNCATE TABLE pfa_user_properties CASCADE;
		
		INSERT INTO pfa_tenant_properties(id,creation_date,last_change_date)  VALUES (1,current_timestamp,current_timestamp);
		INSERT INTO pfa_tenant (id,creation_date,last_change_date,tenant_name,tenant_properties_id) VALUES  (1,current_timestamp,current_timestamp,'PONGE', 1);
		INSERT INTO pfa_user_properties (id,creation_date,last_change_date) VALUES (1,current_timestamp,current_timestamp);
		INSERT INTO pfa_user_properties (id,creation_date,last_change_date) VALUES (2,current_timestamp,current_timestamp);
			
		
		INSERT INTO pfa_user (id , creation_date ,last_change_date , address , date_of_birth ,last_access_time, username, users_password,surname , users_name,tenant_id,user_properties) 
		VALUES  (1,current_timestamp,current_timestamp,'Sjenjak 5, 31000 Osijek','1979-01-01',current_timestamp,'test','test','Samardžić','Krunoslav',1 , 1);
	INSERT INTO pfa_user (id , creation_date ,last_change_date , address , date_of_birth ,last_access_time, username, users_password,surname , users_name,tenant_id,user_properties) 
			VALUES  (2,current_timestamp,current_timestamp,'Sjenjak 131, 31000 Osijek','1976-09-28',current_timestamp,'test1','test1','Samardžić','Damir',1 , 2);
	 </sql>




	</target>




</project>